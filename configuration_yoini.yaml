---
drop_old_db: true       # shall the old databse should be dropped before
db:
    host: localhost     # name of the host of the databse
    name: test          # name of the database
    user: root          # name of the connecting user
    password: bernie    # password of the user
web:
    dir_root: api       # ???
    url_root: /         # ???
    assets: assets      # where are the assets? (images, videos, files)
salt:                   # the salt for all password hashes, must contain numbers in ascending order
    - 2
    - 3
    - 4
    - 7
    - 9
    - 10
    - 13
    - 19
    - 20
architecture:
    use_for_permission: role    # name of the table to use for permission checks 
    use_for_auth: user          # name of the table to use for authentication checks (e.g. for login)
    models:                     # models of this service
        role:                   # name of the model
            name_plural: roles  # name of the model for multiple instances, defaults to models's name . 's'
            permissions:        # permissions for the role 
                create:
                    - none      # no one is allowed to create new instances
                read:
                    - self      # only the currently logged in and is associated with this model
                update:
                    - none
                delete:
                    - none
            properties:         # the properties of this model
                permissions:    # who is allowed to set new values of the properties
                    read:       # array of roles allowed
                        - self
                    update:
                        - none
                list:           # list of properties
                    name:       # name of this property
                        type: string                # it's a string
                        max_length: 255             # not longer than 255
            relations:          # how is this model related to other models
                users:          # it's related to the user model
                    model: user                     # related to te user model
                    type: belongs_to_and_has_many   # with m:n relation
                    via_table: users_roles          # table for m:n relation
                    permissions:                    # permissions for this relation
                        create:                     # for creation, th
                            - all                   # everybody is allowed 
                        read:                       # who is allowed to read this relation
                            - self
                        delete:
                            - self
            instances:
                - name: user
        user:
            name_plural: users
            permissions:
                create:
                    - all
                read:
                    - user
                update:
                    - self
                delete:
                    - self
            properties:
                permissions:            # overwrite permissions of the permission
                    read:
                        - user
                    update:
                        - self
                list:
                    email:
                        type: email
                        use_as_id: true
                    password:
                        type: hash
                        use_as_password: true
                        permissions:
                            read:
                                - none
                    name:
                        type: string
                        max_length: 255
                        null_allowed: true
                        permissions:
                            read:
                                - all
                    image_set:
                        type: bool
                        default: false
                        permissions:
                            read:
                                - all
                    position:
                        type: geo
                        null_allowed: true
                        permissions:
                            read:
                                - self
                    timezone:
                        type: string
                        max_length: 100
                        default: Europe/London
                        permissions:
                            read:
                                - self
                    member_since:
                        type: datetime
                        default: now
                        permissions:
                            update:
                                - none
            relations:
                roles:
                    model: role
                    type: belongs_to_and_has_many
                    via_table: users_roles
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                aors:
                    model: aor
                    type: has_many
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                contacts:
                    model: contact
                    type: has_many
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                contexts:
                    model: context
                    type: has_many
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                projects:
                    model: project
                    type: has_many
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                actions:
                    model: action
                    type: has_many
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                references:
                    model: reference
                    type: has_many
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                reference_lists:
                    model: reference_list
                    type: has_many
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
        aor:
            name_plural: aors
            permissions:
                create:
                    - user
                read:
                    - self
                update:
                    - self
                delete:
                    - self
            properties:
                list:
                    name:
                        type: string
                        max_length: 255
            relations:
                user:
                    model: user
                    type: belongs_to
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                    assign_to_self: true        # assign to currently logged in user upon creation
                actions:
                    model: action
                    type: belongs_to_and_has_many
                    via_table: aors_actions
                    permissions:
                        create:
                            - self              # aor and action must both belong to the currently logged in user
                        read:
                            - self
                        delete:
                            - self
                projects:
                    model: project
                    type: belongs_to_and_has_many
                    via_table: aors_projects
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                references:
                    model: reference
                    type: belongs_to_and_has_many
                    via_table: aors_references
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                reference_lists:
                    model: reference_list
                    type: belongs_to_and_has_many
                    via_table: aors_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
        contact:
            name_plural: contacts
            permissions:
                create:
                    - user
                read:
                    - self
                update:
                    - self
                delete:
                    - self
            properties:
                permissions:
                    read:
                        - self
                    update:
                        - self
                list:
                    name:
                        type: string
                        max_length: 255
                    email:
                        type: email
            relations:
                user:
                    model: user
                    type: belongs_to
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                    assign_to_self: true
                actions:
                    model: actions
                    type: belongs_to_and_has_many
                    via_table: contacts_actions
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                account:
                    model: user
                    type: belongs_to
                    permissions:
                        create:
                            - none
                        read:
                            - self
                        delete:
                            - none
        context:
            permissions:
                create:
                    - user
                read:
                    - self
                update:
                    - self
                delete:
                    - self
            properties:
                permissions:
                    read:
                    update:
                list:
                    name:
                        type: string
                        max_length: 255
            relations:
                user:
                    model: users
                    type: belongs_to
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                    assign_to_self: true 
                actions:
                    model: action
                    type: belongs_to_and_has_many
                    via_table: contexts_actions
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                projects:
                    model: project
                    type: belongs_to_and_has_many
                    via_table: contexts_projects
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                references:
                    model: reference
                    type: belongs_to_and_has_many
                    via_table: contexts_references
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                reference_lists:
                    model: reference_lists
                    type: belongs_to_and_has_many
                    via_table: contexts_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
        action:
            permissions:
                create:
                    - user
                read:
                    - self
                update:
                    - self
                delete:
                    - self
            properties:
                permissions:
                    read:
                        - self
                    update:
                        - self
                list:
                    title:
                        type: string
                        max_length: 255
                    text:
                        type: string
                    energy:
                        type:
                            - 1
                            - 2
                            - 3
                        null_allowed: true
                    time:
                        type: enum
                        allowed_values:
                            - 5min
                            - 10min
                            - 15min
                            - 30min
                            - 45min
                            - 60min
                            - 90min
                            - 120min
                            - 180min
                            - 240min
                            - 360min
                            - 480min
                            - long
                        null_allowed: true
                    start_date:
                        type: datetime
                        null_allowed: true
                    is_repeating:
                        type: bool
                        null_allowed: true
                    repeating_pattern:
                        type: string
                        null_allowed: true
                    finished:
                        type: bool
                    focused:
                        type: bool
                    status:
                        type: enum
                        allowed_values:
                            - next
                            - waiting
                            - scheduled
                            - someday
                            - archived
                            - trashed
            relations:
                user:
                    model: user
                    type: belongs_to
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                    assign_to_self: true
                aors:
                    model: aor
                    type: belongs_to_and_has_many
                    via_table: aors_actions
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                contexts:
                    model: context
                    type: belongs_to_and_has_many
                    via_table: contexts_actions
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                contacts:
                    model: contact
                    type: belongs_to_and_has_many
                    via_table: contacts_actions
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                project:
                    model: project
                    type: belongs_to
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                references:
                    model: reference
                    type: belongs_to_and_has_many
                    via_table: actions_references
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                reference_lists:
                    model: reference_list
                    type: belongs_to_and_has_many
                    via_table: actions_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
        project:
            permissions:
                create:
                    - user
                read:
                    - self
                update:
                    - self
                delete:
                    - self
            properties:
                permissions:
                    read:
                        - self
                    update:
                        - self
                list:
                    title:
                        type: string
                        max_length: 255
                    text:
                        type: string
                        max_length: 255
                    energy:
                        type: enum
                        allowed_values:
                            - 1
                            - 2
                            - 3
                        null_allowed: true
                    time:
                        type: enum
                        allowed_values:
                            - 5min
                            - 10min
                            - 15min
                            - 30min
                            - 45min
                            - 60min
                            - 90min
                            - 120min
                            - 180min
                            - 240min
                            - 360min
                            - 480min
                            - long
                        null_allowed: true
                    start_date:
                        type: datetime
                        null_allowed: true
                    is_repeating:
                        type: bool
                        null_allowed: true
                    repeating_pattern:
                        type: string
                        null_allowed: true
                    finished:
                        type: bool
                    focused:
                        type: bool
                    status:
                        type: enum
                        allowed_values:
                            - next
                            - waiting
                            - scheduled
                            - someday
                            - archived
                            - trashed
            relations:
                user:
                    model: user
                    type: belongs_to
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                    assign_to_self: true
                aors:
                    model: aor
                    type: belongs_to_and_has_many
                    via_table: aors_projects
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                contexts:
                    model: context
                    type: belongs_to_and_has_many
                    via_table: contexts_projects
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                contacts:
                    model: contact
                    type: belongs_to_and_has_many
                    via_table: contacts_projects
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                actions:
                    model: actions
                    type: has_many
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                references:
                    model: reference
                    type: belongs_to_and_has_many
                    via_table: projects_references
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                reference_lists:
                    model: reference_list
                    type: belongs_to_and_has_many
                    via_table: projects_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
        reference:
            permissions:
                create:
                    - user
                read:
                    - self
                update:
                    - self
                delete:
                    - self
            properties:
                permissions:
                    read:
                        - self
                    update:
                        - self
                list:
                    title:
                        type: string
                        max_length: 255
                    text:
                        type: string
                    focused:
                        type: bool
                    status:
                        type: enum
                        allowed_values:
                            - normal
                            - trashed
            relations:
                user:
                    model: user
                    type: belongs_to
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                    assign_to_self: true
                aors:
                    model: aor
                    type: belongs_to_and_has_many
                    via_table: aors_projects
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                contexts:
                    model: context
                    type: belongs_to_and_has_many
                    via_table: contexts_projects
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                contacts:
                    model: contact
                    type: belongs_to_and_has_many
                    via_table: contacts_projects
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                actions:
                    model: action
                    type: belongs_to_and_has_many
                    via_table: actions_references
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                projects:
                    model: project
                    type: belongs_to_and_has_many
                    via_table: projects_references
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                reference_lists:
                    model: reference_list
                    type: belongs_to
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
        refence_list:
            permissions:
                create:
                    - user
                read:
                    - self
                update:
                    - self
                delete:
                    - self
            properties:
                permissions:
                    read:
                        - self
                    update:
                        - self
                list:
                    title:
                        type: string
                        max_length: 255
                    text:
                        type: string
                    focused:
                        type: bool
                    status:
                        type:
                            - normal
                            - trashed
            relations:
                user:
                    model: user
                    type: belongs_to
                    permissions:
                        create:
                            - user
                        read:
                            - self
                        delete:
                            - self
                    assign_to_self: true
                aors:
                    model: aor
                    type: belongs_to_and_has_many
                    via_table: aors_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                contexts:
                    model: context
                    type: belongs_to_and_has_many
                    via_table: contexts_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                contacts:
                    model: contact
                    type: belongs_to_and_has_many
                    via_table: contacts_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                actions:
                    model: action
                    type: belongs_to_and_has_many
                    via_table: actions_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                projects:
                    model: project
                    type: belongs_to_and_has_many
                    via_table: projects_reference_lists
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
                references:
                    model: reference
                    type: has_many
                    permissions:
                        create:
                            - self
                        read:
                            - self
                        delete:
                            - self
...